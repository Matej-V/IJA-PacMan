\doxysection{Ghost\+Object.\+java}
\label{_ghost_object_8java_source}\index{D:/school/6sem/ija/src/main/java/ija/project/game/GhostObject.java@{D:/school/6sem/ija/src/main/java/ija/project/game/GhostObject.java}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{keyword}{package\ }ija.project.game;}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{keyword}{import}\ ija.project.common.AbstractObservableObject;}
\DoxyCodeLine{00004\ \textcolor{keyword}{import}\ ija.project.common.Field;}
\DoxyCodeLine{00005\ \textcolor{keyword}{import}\ ija.project.common.MazeObject;}
\DoxyCodeLine{00006\ \textcolor{keyword}{import}\ javafx.scene.paint.Color;}
\DoxyCodeLine{00007\ \textcolor{keyword}{import}\ java.util.ArrayList;}
\DoxyCodeLine{00008\ \textcolor{keyword}{import}\ java.util.List;}
\DoxyCodeLine{00009\ \textcolor{keyword}{import}\ java.util.Random;}
\DoxyCodeLine{00010\ \textcolor{keyword}{import}\ java.util.concurrent.locks.ReadWriteLock;}
\DoxyCodeLine{00011\ \textcolor{keyword}{import}\ java.util.concurrent.locks.ReentrantReadWriteLock;}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }GhostObject\ \textcolor{keyword}{extends}\ AbstractObservableObject\ implements\ MazeObject\ \{}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keyword}{private}\ Field\ field;}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{final}\ PathField\ startField;}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{final}\ \textcolor{keywordtype}{int}\ id;}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{final}\ Color\ color;}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keyword}{private}\ Field.Direction\ direction;}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keywordtype}{boolean}\ isEatable\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00044\ \ \ \ \ ReadWriteLock\ lock\ =\ \textcolor{keyword}{new}\ ReentrantReadWriteLock();}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ List<Color>\ colors\ =\ \textcolor{keyword}{new}\ ArrayList<>()\{\{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ add(Color.GREENYELLOW);}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ add(Color.HONEYDEW);}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ add(Color.HOTPINK);}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ add(Color.LIGHTBLUE);}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ add(Color.LEMONCHIFFON);}
\DoxyCodeLine{00054\ \ \ \ \ \ \}\};}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keyword}{public}\ GhostObject(PathField\ field,\ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id})\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ this.id\ =\ id;}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ this.field\ =\ field;}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ this.startField\ =\ field;}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ this.color\ =\ colors.get(this.\textcolor{keywordtype}{id}\ \%\ colors.size());}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ this.direction\ =\ Field.Direction.values()[\textcolor{keyword}{new}\ Random().nextInt(Field.Direction.values().length)];}
\DoxyCodeLine{00068\ \ \ \ \ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00077\ \ \ \ \ @Override}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{boolean}\ canMove(Field.Direction\ dir)\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ Field\ nextField\ =\ field.nextField(dir);}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ nextField\ instanceof\ PathField;}
\DoxyCodeLine{00081\ \ \ \ \ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00091\ \ \ \ \ @Override}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{boolean}\ move(Field.Direction\ dir)\ \textcolor{keywordflow}{throws}\ GameException\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ lock.writeLock().lock();}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!canMove(dir))\ \{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lock.writeLock().unlock();}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PathField\ nextField\ =\ (PathField)\ field.nextField(dir);}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this.field.remove(\textcolor{keyword}{this});}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nextField.put(\textcolor{keyword}{this}))\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this.field\ =\ nextField;}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{finally}\ \{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ lock.writeLock().unlock();}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ notifyLogObservers();}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00110\ \ \ \ \ \}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00120\ \ \ \ \ @Override}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{boolean}\ move(Field\ field)\ \textcolor{keywordflow}{throws}\ GameException\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ lock.writeLock().lock();}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(field.canMove())\{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this.field.remove(\textcolor{keyword}{this});}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (((PathField)field).put(\textcolor{keyword}{this}))\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this.field\ =\ field;}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{finally}\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ lock.writeLock().unlock();}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00136\ \ \ \ \ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00141\ \ \ \ \ @Override}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ moveToStart()\ throws\ GameException\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ lock.writeLock().lock();}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ this.field.remove(\textcolor{keyword}{this});}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ this.startField.put(\textcolor{keyword}{this});}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ this.field\ =\ this.startField;}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ notifyObservers();}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ notifyLogObservers();}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{finally}\ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ lock.writeLock().unlock();}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00153\ \ \ \ \ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keyword}{public}\ Field\ getField()\ \{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ field;}
\DoxyCodeLine{00162\ \ \ \ \ \}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00167\ \ \ \ \ @Override}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{int}\ getLives()\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ UnsupportedOperationException(\textcolor{stringliteral}{"{}Unsupported\ operation."{}});}
\DoxyCodeLine{00170\ \ \ \ \ \}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00175\ \ \ \ \ @Override}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{int}\ getScore()\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ UnsupportedOperationException(\textcolor{stringliteral}{"{}Unsupported\ operation."{}});}
\DoxyCodeLine{00178\ \ \ \ \ \}}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00186\ \ \ \ \ @Override}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keyword}{public}\ Field.Direction\ getDirection()\ \{}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ direction;}
\DoxyCodeLine{00189\ \ \ \ \ \}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00196\ \ \ \ \ @Override}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ setDirection(Field.Direction\ dir)\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ direction\ =\ dir;}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ notifyObservers();}
\DoxyCodeLine{00200\ \ \ \ \ \}}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00207\ \ \ \ \ @Override}
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{boolean}\ isPacman()\ \{}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00210\ \ \ \ \ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ setEatable(\textcolor{keywordtype}{boolean}\ eatable)\{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ isEatable\ =\ eatable;}
\DoxyCodeLine{00219\ \ \ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{boolean}\ isEatable()\{}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ isEatable;}
\DoxyCodeLine{00228\ \ \ \ \ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00235\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{int}\ getId()\ \{}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this.id;}
\DoxyCodeLine{00237\ \ \ \ \ \}}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{keyword}{public}\ Color\ getColor()\ \{}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ color;}
\DoxyCodeLine{00246\ \ \ \ \ \}}
\DoxyCodeLine{00247\ \}}

\end{DoxyCode}
