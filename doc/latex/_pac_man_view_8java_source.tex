\doxysection{Pac\+Man\+View.\+java}
\label{_pac_man_view_8java_source}\index{D:/school/6sem/ija/src/main/java/ija/project/pacman\_project/PacManView.java@{D:/school/6sem/ija/src/main/java/ija/project/pacman\_project/PacManView.java}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{keyword}{package\ }ija.project.pacman\_project;}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{keyword}{import}\ ija.project.view.FieldView;}
\DoxyCodeLine{00004\ \textcolor{keyword}{import}\ ija.project.view.UIBarView;}
\DoxyCodeLine{00005\ \textcolor{keyword}{import}\ javafx.geometry.Pos;}
\DoxyCodeLine{00006\ \textcolor{keyword}{import}\ javafx.scene.Group;}
\DoxyCodeLine{00007\ \textcolor{keyword}{import}\ javafx.scene.control.Button;}
\DoxyCodeLine{00008\ \textcolor{keyword}{import}\ javafx.scene.control.Menu;}
\DoxyCodeLine{00009\ \textcolor{keyword}{import}\ javafx.scene.control.MenuBar;}
\DoxyCodeLine{00010\ \textcolor{keyword}{import}\ javafx.scene.control.MenuItem;}
\DoxyCodeLine{00011\ \textcolor{keyword}{import}\ javafx.scene.effect.Blend;}
\DoxyCodeLine{00012\ \textcolor{keyword}{import}\ javafx.scene.effect.BlendMode;}
\DoxyCodeLine{00013\ \textcolor{keyword}{import}\ javafx.scene.input.KeyCode;}
\DoxyCodeLine{00014\ \textcolor{keyword}{import}\ javafx.scene.layout.*;}
\DoxyCodeLine{00015\ \textcolor{keyword}{import}\ javafx.scene.image.Image;}
\DoxyCodeLine{00016\ \textcolor{keyword}{import}\ javafx.scene.image.ImageView;}
\DoxyCodeLine{00017\ \textcolor{keyword}{import}\ javafx.scene.text.Text;}
\DoxyCodeLine{00018\ \textcolor{keyword}{import}\ java.io.FileInputStream;}
\DoxyCodeLine{00019\ \textcolor{keyword}{import}\ java.io.FileNotFoundException;}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }PacManView\ \textcolor{keyword}{extends}\ AbstractObservableView\{}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keyword}{private}\ PacManController\ controller;}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keyword}{public}\ Pane\ currentScene;}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{final}\ \textcolor{keywordtype}{double}\ widthOfScreen;}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{final}\ \textcolor{keywordtype}{double}\ heightOfScreen;}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keyword}{public}\ StackPane\ gameBox;}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{public}\ PacManView(\ \textcolor{keywordtype}{double}\ width,\ \textcolor{keywordtype}{double}\ height)\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ this.widthOfScreen\ =\ width;}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ this.heightOfScreen\ =\ height;}
\DoxyCodeLine{00050\ \ \ \ \ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ setController(PacManController\ controller)\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ this.controller\ =\ controller;}
\DoxyCodeLine{00054\ \ \ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{public}\ Group\ drawMaze()\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ Group\ mazeGroup\ =\ \textcolor{keyword}{new}\ Group();}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ row\ =\ 0;\ row\ <\ controller.maze.numRows();\ row++)\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ column\ =\ 0;\ column\ <\ controller.maze.numCols();\ column++)\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FieldView\ fieldView\ =\ \textcolor{keyword}{new}\ FieldView(controller.maze.getField(row,\ column),\ (Math.min(widthOfScreen,\ heightOfScreen)\ -\/\ 100)\ /\ controller.maze.numCols(),\ row,\ column);}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mazeGroup.getChildren().add(fieldView);}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ mazeGroup;}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{public}\ Group\ drawUI()\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ UIBarView\ UIBar\ =\ \textcolor{keyword}{new}\ UIBarView(controller.maze.getPacMan());}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ Group(UIBar);}
\DoxyCodeLine{00078\ \ \ \ \ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ generateMainScreen()\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ StackPane\ pane\ =\ \textcolor{keyword}{new}\ StackPane(drawBackgroundImage(\textcolor{stringliteral}{"{}./src/main/resources/ija/project/pacman\_project/img/title.jpg"{}}),\ drawButton(\textcolor{stringliteral}{"{}START\ THE\ GAME"{}}));}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ pane.setAlignment(Pos.CENTER);}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ this.currentScene\ =\ pane;}
\DoxyCodeLine{00087\ \ \ \ \ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ generateGame()\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ Menu}}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ Menu\ menu\ =\ \textcolor{keyword}{new}\ Menu(\textcolor{stringliteral}{"{}Menu"{}});}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ MenuItem\ restartGame\ =\ \textcolor{keyword}{new}\ MenuItem(\textcolor{stringliteral}{"{}Restart\ game"{}});}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ MenuBar}}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ MenuBar\ menuBar\ =\ \textcolor{keyword}{new}\ MenuBar(menu);}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ menu.getItems().addAll(restartGame);}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ restartGame.setOnAction(e\ -\/>\ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ System.out.println(\textcolor{stringliteral}{"{}Restarting\ game"{}});}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ controller.newGame();}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ VBox\ uiMazeBox\ =\ \textcolor{keyword}{new}\ VBox();}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ HBox\ mazeHolder\ =\ \textcolor{keyword}{new}\ HBox(drawMaze());}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ mazeHolder.alignmentProperty().set(Pos.CENTER);}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ HBox\ statsHolder\ =\ \textcolor{keyword}{new}\ HBox(drawUI());}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ statsHolder.alignmentProperty().set(Pos.CENTER);}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ statsHolder.setStyle(\textcolor{stringliteral}{"{}-\/fx-\/background-\/color:\ \#FFFFFF;"{}});}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ uiMazeBox.getChildren().addAll(statsHolder,\ mazeHolder);}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Stack\ Pane\ to\ let\ us\ add\ pause\ screen\ over\ game\ screen}}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ StackPane\ temp\ =\ \textcolor{keyword}{new}\ StackPane(uiMazeBox);}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ temp.setAlignment(Pos.CENTER);}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ this.gameBox\ =\ temp;}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ background\ image}}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ StackPane\ pane\ =\ \textcolor{keyword}{new}\ StackPane(drawBackgroundImage(\textcolor{stringliteral}{"{}./src/main/resources/ija/project/pacman\_project/img/title.jpg"{}}),\ \textcolor{keyword}{new}\ VBox(menuBar,\ gameBox));}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ pane.setAlignment(Pos.CENTER);}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ this.currentScene\ =\ pane;}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ notifyObservers();}
\DoxyCodeLine{00121\ \ \ \ \ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ generateEndScreen()\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ System.out.println(\textcolor{stringliteral}{"{}Generating\ end\ screen"{}});}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Score}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ Text\ score\ =\ \textcolor{keyword}{new}\ Text(\textcolor{stringliteral}{"{}Total\ score:\ "{}}\ +\ controller.maze.getPacMan().getScore());}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ score.setStyle(\textcolor{stringliteral}{"{}-\/fx-\/font-\/size:\ 20px;\ -\/fx-\/fill:\ \#FFFFFF"{}});}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ score.setTranslateY(-\/100);}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ StackPane\ pane\ =\ \textcolor{keyword}{new}\ StackPane(drawBackgroundImage(\textcolor{stringliteral}{"{}./src/main/resources/ija/project/pacman\_project/img/game-\/over.jpg"{}}),\ drawButton(\textcolor{stringliteral}{"{}PLAY\ AGAIN"{}}),\ score);}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ pane.setAlignment(Pos.CENTER);}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ this.currentScene\ =\ pane;}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ notifyObservers();}
\DoxyCodeLine{00136\ \ \ \ \ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ generateSuccessScreen()\{}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ System.out.println(\textcolor{stringliteral}{"{}Generating\ success\ screen"{}});}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Score}}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ Text\ score\ =\ \textcolor{keyword}{new}\ Text(\textcolor{stringliteral}{"{}Total\ score:\ "{}}\ +\ controller.maze.getPacMan().getScore());}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ score.setStyle(\textcolor{stringliteral}{"{}-\/fx-\/font-\/size:\ 20px;\ -\/fx-\/fill:\ \#FFFFFF"{}});}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ score.setTranslateY(-\/50);}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ StackPane\ pane\ =\ \textcolor{keyword}{new}\ StackPane(drawBackgroundImage(\textcolor{stringliteral}{"{}./src/main/resources/ija/project/pacman\_project/img/title.jpg"{}}),\ drawButton(\textcolor{stringliteral}{"{}PLAY\ AGAIN"{}}),\ score);}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ add\ win\ text}}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ Text\ text\ =\ \textcolor{keyword}{new}\ Text(\textcolor{stringliteral}{"{}YOU\ WON"{}});}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ text.setStyle(\textcolor{stringliteral}{"{}-\/fx-\/font-\/size:\ 50px;\ -\/fx-\/font-\/weight:\ bold;\ -\/fx-\/fill:\ white;"{}});}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ text.setTranslateY(-\/150);}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ pane.getChildren().add(text);}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Load\ button}}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ pane.setAlignment(Pos.CENTER);}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ this.currentScene\ =\ pane;}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ notifyObservers();}
\DoxyCodeLine{00157\ \ \ \ \ \}}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keyword}{private}\ ImageView\ drawBackgroundImage(String\ url)\{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ ImageView\ backgroundImage\ =\ \textcolor{keyword}{new}\ ImageView();}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ backgroundImage.setImage(\textcolor{keyword}{new}\ Image(\textcolor{keyword}{new}\ FileInputStream(url)));}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (FileNotFoundException\ e)\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ e.printStackTrace();}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ backgroundImage.setX(0);}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ backgroundImage.setY(0);}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ backgroundImage.setFitWidth(widthOfScreen);}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ backgroundImage.setFitHeight(heightOfScreen);}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ Blend\ blend\ =\ \textcolor{keyword}{new}\ Blend();}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ blend.setMode(BlendMode.MULTIPLY);}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ backgroundImage.setEffect(blend);}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ backgroundImage;}
\DoxyCodeLine{00179\ \ \ \ \ \}}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keyword}{private}\ Button\ drawButton(String\ text)\{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ Button\ button\ =\ \textcolor{keyword}{new}\ Button();}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ button.setText(text);}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ button.setStyle(\textcolor{stringliteral}{"{}-\/fx-\/background-\/color:\ \#FFFFFF;\ -\/fx-\/text-\/fill:\ \#00022A;\ -\/fx-\/border-\/radius:\ 20\%;\ -\/fx-\/font-\/size:\ 16px"{}});}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ button.setOnAction(e\ -\/>\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ System.out.println(text\ +\ \textcolor{stringliteral}{"{}\ button\ clicked"{}});}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ controller.newGame();}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ button.requestFocus();}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ button.setOnKeyPressed(event\ -\/>\ \{}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (event.getCode()\ ==\ KeyCode.ENTER)\ \{}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ button.fire();\ \ \ \ \ \ \textcolor{comment}{//\ Simulate\ button\ action}}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ event.consume();\ \ \ \ \textcolor{comment}{//\ Consume\ the\ event\ to\ prevent\ further\ processing}}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ button;}
\DoxyCodeLine{00202\ \ \ \ \ \}}
\DoxyCodeLine{00203\ \}}

\end{DoxyCode}
