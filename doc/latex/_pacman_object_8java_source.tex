\doxysection{Pacman\+Object.\+java}
\label{_pacman_object_8java_source}\index{D:/school/6sem/ija/src/main/java/ija/project/game/PacmanObject.java@{D:/school/6sem/ija/src/main/java/ija/project/game/PacmanObject.java}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{keyword}{package\ }ija.project.game;}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{keyword}{import}\ ija.project.common.*;}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{keyword}{import}\ java.util.ArrayList;}
\DoxyCodeLine{00006\ \textcolor{keyword}{import}\ java.util.Arrays;}
\DoxyCodeLine{00007\ \textcolor{keyword}{import}\ java.util.List;}
\DoxyCodeLine{00008\ \textcolor{keyword}{import}\ java.util.ListIterator;}
\DoxyCodeLine{00009\ \textcolor{keyword}{import}\ java.util.concurrent.locks.ReadWriteLock;}
\DoxyCodeLine{00010\ \textcolor{keyword}{import}\ java.util.concurrent.locks.ReentrantReadWriteLock;}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }PacmanObject\ \textcolor{keyword}{extends}\ AbstractObservableObject\ implements\ MazeObject\ \{}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keyword}{private}\ Field\ field;}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keyword}{final}\ PathField\ startField;}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keyword}{private}\ Integer\ lives;}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keyword}{private}\ Integer\ score;}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keyword}{private}\ Field.Direction\ direction;}
\DoxyCodeLine{00039\ \ \ \ \ ReadWriteLock\ lock\ =\ \textcolor{keyword}{new}\ ReentrantReadWriteLock();}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{boolean}\ pointCollected;}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keyword}{public}\ PacmanObject(PathField\ field)\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ this.field\ =\ field;}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ this.startField\ =\ field;}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ this.lives\ =\ 3;}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ this.score\ =\ 0;}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ this.direction\ =\ Field.Direction.U;}
\DoxyCodeLine{00056\ \ \ \ \ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00065\ \ \ \ \ @Override}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{boolean}\ canMove(Field.Direction\ dir)\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ Field\ nextField\ =\ field.nextField(dir);}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ nextField\ instanceof\ PathField;}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00077\ \ \ \ \ @Override}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{boolean}\ move(Field.Direction\ dir)\ \textcolor{keywordflow}{throws}\ GameException\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ lock.writeLock().lock();}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!canMove(dir))\ \{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PathField\ nextField\ =\ (PathField)\ this.field.nextField(dir);}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this.field.remove(\textcolor{keyword}{this});}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nextField.put(\textcolor{keyword}{this}))\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this.field\ =\ nextField;}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(field.hasKey())\{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ field.getMaze().removeKey(field.getKey());}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{finally}\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ lock.writeLock().unlock();}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ notifyLogObservers();}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00098\ \ \ \ \ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00108\ \ \ \ \ @Override}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{boolean}\ move(Field\ field)\ \textcolor{keywordflow}{throws}\ GameException\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ lock.writeLock().lock();}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(field.canMove())\{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//set\ direction\ accroding\ to\ the\ field\ position\ and\ current\ position}}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(this.field.getRow()\ ==\ field.getRow())\{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(this.field.getCol()\ <\ field.getCol())\{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ setDirection(Field.Direction.R);}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ setDirection(Field.Direction.L);}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(this.field.getRow()\ <\ field.getRow())\{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ setDirection(Field.Direction.D);}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ setDirection(Field.Direction.U);}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this.field.remove(\textcolor{keyword}{this});}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (((PathField)field).put(\textcolor{keyword}{this}))\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this.field\ =\ field;}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(this.field.hasKey())\{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this.field.getMaze().removeKey(this.field.getKey());}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{finally}\ \{}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ lock.writeLock().unlock();}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ notifyLogObservers();}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00143\ \ \ \ \ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ moveToStart()\ throws\ GameException\ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ lock.writeLock().lock();}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ move(startField);}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ this.field\ =\ this.startField;}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ decreaseLives();}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ notifyObservers();}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ notifyLogObservers();}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{finally}\ \{}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ lock.writeLock().unlock();}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00161\ \ \ \ \ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keyword}{public}\ Field\ getField()\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this.field;}
\DoxyCodeLine{00170\ \ \ \ \ \}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{int}\ getLives()\ \{}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this.lives;}
\DoxyCodeLine{00179\ \ \ \ \ \}}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{int}\ getScore()\ \{}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this.score;}
\DoxyCodeLine{00187\ \ \ \ \ \}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00195\ \ \ \ \ @Override}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keyword}{public}\ Field.Direction\ getDirection()\ \{}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this.direction;}
\DoxyCodeLine{00198\ \ \ \ \ \}}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00206\ \ \ \ \ @Override}
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ setDirection(Field.Direction\ dir)\ \{}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ this.direction\ =\ dir;}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Notify\ view\ when\ direction\ is\ changed\ to\ change\ view\ of\ PacMan\ */}}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ notifyObservers();}
\DoxyCodeLine{00211\ \ \ \ \ \}}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00218\ \ \ \ \ @Override}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{boolean}\ isPacman()\ \{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00221\ \ \ \ \ \}}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ setLives(\textcolor{keywordtype}{int}\ lives)\{}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ this.lives\ =\ lives;}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ notifyObservers();}
\DoxyCodeLine{00231\ \ \ \ \ \}}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ setScore(\textcolor{keywordtype}{int}\ score)\{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ this.score\ =\ score;}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ notifyObservers();}
\DoxyCodeLine{00241\ \ \ \ \ \}}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ updateScore()\{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ this.score++;}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Notification\ for\ UI\ view\ update\ */}}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ notifyObservers();}
\DoxyCodeLine{00251\ \ \ \ \ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ decreaseLives()\ throws\ GameException\ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ this.lives-\/-\/;}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ System.out.println(\textcolor{stringliteral}{"{}Lives:\ "{}}+\ lives);}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Notification\ for\ UI\ view\ update\ */}}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(lives\ ==\ 0)\{}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ GameException(GameException.TypeOfException.LostGame);}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ notifyObservers();}
\DoxyCodeLine{00265\ \ \ \ \ \}}
\DoxyCodeLine{00266\ \}}

\end{DoxyCode}
